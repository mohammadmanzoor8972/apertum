(this.webpackJsonpapertum=this.webpackJsonpapertum||[]).push([[0],{82:function(e,t,n){e.exports=n(95)},95:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),i=n(42),s=n(10),l=n(15),u=n.n(l),m=n(25),g=n(23);function d(){return p.apply(this,arguments)}function p(){return(p=Object(m.a)(u.a.mark((function e(){var t,n,a,r,o,c,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:"GET",n=i.length>1&&void 0!==i[1]?i[1]:"",a=i.length>2&&void 0!==i[2]?i[2]:{},r=i.length>3&&void 0!==i[3]?i[3]:"","POST"!==t){e.next=11;break}return e.next=7,fetch(n,{method:t,headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(a)});case 7:return o=e.sent,e.next=10,o.json();case 10:return e.abrupt("return",e.sent);case 11:return e.next=13,fetch(n,{method:t,headers:{Accept:"application/json",Authorization:"Bearer ".concat(r)}});case 13:return c=e.sent,e.next=16,c.json();case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var r="expires="+a.toUTCString();document.cookie=e+"="+t+"; "+r}var h=r.a.createContext({users:[],setUsers:null,loginError:null,setLoginError:null,isLoggedIn:!1,setIsLoggegIn:null,handleLogin:null,isLoading:!1,setIsLoading:null,token:null,setToken:null,fetchUsers:null}),v=function(e){var t=Object(a.useState)(!1),n=Object(g.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)([]),s=Object(g.a)(i,2),l=s[0],p=s[1],f=Object(a.useState)(null),v=Object(g.a)(f,2),b=v[0],E=v[1],k=Object(a.useState)(!1),j=Object(g.a)(k,2),I=j[0],O=j[1],x=Object(a.useState)(null),w=Object(g.a)(x,2),L=w[0],y=w[1];Object(a.useEffect)((function(){O(!0);var e=function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}("token");e&&(c(!0),y(e)),O(!1)}),[]);var N=function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d("POST","https://apertum-interview.herokuapp.com/api/user/login",{accountId:t.accountId,pswd:t.password});case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),E(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d("GET","https://apertum-interview.herokuapp.com/api/users",{},t);case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),E(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(h.Provider,{value:{isLoggedIn:o,setIsLoggegIn:c,users:l,setUsers:p,loginError:b,setLoginError:E,handleLogin:N,fetchUsers:S,isLoading:I,setIsLoading:O,token:L,setToken:y}},e.children)},b=n(49),E=function(){return Object(a.useContext)(h)},k=function(){return{isLoading:E().isLoading,setIsLoading:E().setIsLoading,isLoggedIn:E().isLoggedIn,setIsLoggegIn:E().setIsLoggegIn,users:E().users,setUsers:E().setUsers,loginError:E().loginError,setLoginError:E().setLoginError,handleLogin:E().handleLogin,token:E().token,setToken:E().setToken,fetchUsers:E().fetchUsers}},j=function(e){var t=e.component,n=Object(b.a)(e,["component"]),a=k().isLoggedIn;return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/login"})}}))},I=n(134),O=n(136),x=n(138),w=n(139),L=n(140),y=Object(I.a)((function(e){return{root:{backgroundColor:e.palette.common.white,color:"#04ba5f",padding:"10px 0",height:"116px",boxShadow:"none"},link:{fontSize:0},toolbar:{display:"flex",justifyContent:"space-between",alignItems:"center"},button:{fontWeight:600}}})),N=function(){var e=y(),t=k(),n=t.isLoggedIn,a=t.setIsLoggegIn,o=t.setToken;return r.a.createElement(O.a,{position:"sticky",className:e.root},r.a.createElement(x.a,{className:e.toolbar},r.a.createElement(w.a,{color:"inherit",href:"https://apertumo.com/",className:e.link},r.a.createElement("img",{src:"https://apertumo.com/images/logo-apertum-online-dark-high-res.png",alt:"Apertum Online",height:"60"})),n&&r.a.createElement(L.a,{color:"inherit",className:e.button,onClick:function(){a(!1),o(null),f("token",null,-20)}},"Logout")))},S=function(e){var t=e.component,n=Object(b.a)(e,["component"]),a=k().isLoggedIn;return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(s.a,{to:"/"}):r.a.createElement(t,e)}}))},C=n(155),T=n(141),A=Object(I.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),U=function(){var e=A(),t=k().isLoading;return t?r.a.createElement(C.a,{className:e.backdrop,open:t},r.a.createElement(T.a,{color:"inherit"})):null},W=n(148),z=n(156),B=n(153),P=n(71),R=n(149),_=n(52),D=n(142),J=n(143),M=n(144),q=n(145),F=n(146),G=n(147),H=n(50),V=n(53),Y=n(51),$=Object(I.a)((function(e){return{root:{margin:"20px 0",display:"flex",alignItems:"flex-start",padding:20},avatar:{marginRight:20,height:50,width:50,fontWeight:600},heading:{fontWeight:600},filter:{textAlign:"right",margin:"20px 0"},filterButton:{backgroundColor:"#04ba5f",color:"#fff",fontWeight:600,"&:hover":{backgroundColor:"#04ba5f"}},noResult:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"calc(100vh - 85px)",fontSize:20,fontWeight:600,color:"#04ba5f",backgroundColor:"#fff"},list:{listStyle:"none",padding:0}}})),K=[_.a,D.a,J.a,M.a,q.a,F.a,G.a,H.a,V.a,Y.a],Q=function(e){var t=e.user,n=e.classes,a=Math.floor(10*Math.random()),o=(null===t||void 0===t?void 0:t.firstName[0])||"A";return r.a.createElement(W.a,{className:n.root},r.a.createElement(z.a,{"aria-label":"Name",className:n.avatar,style:{backgroundColor:K[a][500]}},o),r.a.createElement(B.a,null,r.a.createElement(P.a,{variant:"h6",className:n.heading},"".concat(null===t||void 0===t?void 0:t.firstName," ").concat(null===t||void 0===t?void 0:t.lastName)),r.a.createElement(P.a,null,"Account Id: ".concat(null===t||void 0===t?void 0:t.accountId)),r.a.createElement(P.a,{variant:"caption"},"Age: ".concat(null===t||void 0===t?void 0:t.age," Years"))))},X=function(){var e=k(),t=e.token,n=e.fetchUsers,o=e.setUsers,c=e.setLoginError,i=e.setIsLoading,s=e.isLoading,l=e.users,d=Object(a.useState)(!1),p=Object(g.a)(d,2),f=p[0],h=p[1],v=$(),b=f?l.filter((function(e){var t="".concat(null===e||void 0===e?void 0:e.firstName," ").concat(null===e||void 0===e?void 0:e.lastName);return(null===e||void 0===e?void 0:e.age)>=20&&(null===e||void 0===e?void 0:e.age)<30&&(null===t||void 0===t?void 0:t.length)>=10})):l;return Object(a.useEffect)((function(){i(!0),function(){var e=Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:(null===(a=e.sent)||void 0===a?void 0:a.error_message)?c({message:a.error_message}):o(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),i(!1)}),[t]),l||s?r.a.createElement(R.a,null,l&&l.length>0&&r.a.createElement(B.a,{className:v.filter},r.a.createElement(L.a,{color:"inherit",variant:"contained",onClick:function(){h(!f)},className:v.filterButton},f?"Show All":"Filter List")),r.a.createElement(B.a,{component:"ul",className:v.list},(b||[]).map((function(e,t){return r.a.createElement(B.a,{key:t,component:"li"},r.a.createElement(Q,{user:e,classes:v}))})))):r.a.createElement(R.a,null,r.a.createElement(B.a,{className:v.noResult},"No user found!!!"))},Z=n(33),ee=n(150),te=n(152),ne=n(151),ae=n(154),re=n(68),oe=n.n(re);function ce(){return r.a.createElement(P.a,{variant:"body2",color:"textSecondary",align:"center"},"\xa9 2019 ",r.a.createElement(w.a,{color:"inherit",href:"https://apertumo.com/"},"Apertum Online")," All rights reserved.")}var ie=Object(I.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),se=function(){var e=Object(a.useState)({accountId:"",password:"",remember:!1}),t=Object(g.a)(e,2),n=t[0],o=t[1],c=k(),i=c.setIsLoading,s=c.loginError,l=c.handleLogin,d=c.setIsLoggegIn,p=c.setLoginError,h=c.setToken,v=ie(),b=function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i(!0),e.next=4,l(n);case 4:(a=e.sent).error_message?p({message:a.error_message}):(h(a.token),n.remember,f("token",a.token,.0104167),d(!0)),i(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(R.a,{component:"main",maxWidth:"xs"},r.a.createElement(ee.a,null),r.a.createElement("div",{className:v.paper},r.a.createElement(z.a,{className:v.avatar},r.a.createElement(oe.a,null)),r.a.createElement(P.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:v.form,noValidate:!0,onSubmit:b},r.a.createElement(te.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"accountId",label:"Account Id",name:"email",type:"text",autoFocus:!0,value:n.accountId,onChange:function(e){o(Object(Z.a)(Object(Z.a)({},n),{},{accountId:e.target.value}))}}),r.a.createElement(te.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:n.password,onChange:function(e){o(Object(Z.a)(Object(Z.a)({},n),{},{password:e.target.value}))}}),r.a.createElement(ne.a,{control:r.a.createElement(ae.a,{value:"remember",color:"primary",checked:n.remember,onChange:function(e){o(Object(Z.a)(Object(Z.a)({},n),{},{remember:!n.remember}))}}),label:"Remember me"}),r.a.createElement(L.a,{type:"submit",fullWidth:!0,size:"large",variant:"contained",color:"primary",className:v.submit},"Sign In"),r.a.createElement(P.a,{variant:"caption",color:"error"},null===s||void 0===s?void 0:s.message))),r.a.createElement(B.a,{mt:8},r.a.createElement(ce,null)))};var le=function(){return r.a.createElement(v,null,r.a.createElement(N,null),r.a.createElement(U,null),r.a.createElement(i.a,null,r.a.createElement(s.d,null,r.a.createElement(j,{component:X,path:"/",exact:!0}),r.a.createElement(S,{component:se,path:"/login",exact:!0}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[82,1,2]]]);
//# sourceMappingURL=main.2f231093.chunk.js.map